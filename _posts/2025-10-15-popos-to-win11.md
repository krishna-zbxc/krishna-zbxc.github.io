# 🧠 **Daily Build Log – From Pop!_OS to Clean Windows 11 (Remote via Mac)**

### 📅 **Date:** October 15, 2025  
### 💻 **Machines:**
- **Host:** MacBook Pro (macOS)  
- **Target:** HP Laptop (previously running Pop!_OS 22.04)  

---

## ⚙️ **Phase 1 – MacBook Setup**

**Goal:** Prepare a clean, bootable Windows 11 USB installer from macOS.

**Steps:**
1. Verified the USB device:
   ```bash
   diskutil list
   ```
2. Erased and reinitialized the USB:
   ```bash
   diskutil eraseDisk FAT32 CLEAN MBRFormat /dev/disk7
   ```
3. Flashed the Windows 11 ISO directly using `dd`:
   ```bash
   sudo dd if=~/Downloads/Win11_25H2_EnglishInternational_x64.iso of=/dev/rdisk7 bs=4m status=progress
   sudo sync
   diskutil eject /dev/disk7
   ```
4. Monitored transfer progress manually — around **9 MB/s**, completed in ~15 minutes.  
5. Verified success and clean ejection.

---

## 🧩 **Phase 2 – Preparing on Pop!_OS (Target HP Laptop)**

**Goal:** Build a writable, UEFI-bootable Windows 11 USB installer.

1. Plugged the USB into HP laptop running **Pop!_OS**.  
2. Verified the device:
   ```bash
   lsblk
   ```
   → Identified as `/dev/sdb`.  
3. Installed WoeUSB:
   ```bash
   sudo add-apt-repository ppa:tomtomtom/woeusb
   sudo apt update
   sudo apt install woeusb woeusb-frontend-wxgtk wimtools
   ```
4. Flashed Windows 11 ISO with writable NTFS:
   ```bash
   sudo woeusb --device ~/Downloads/Win11_25H2_EnglishInternational_x64.iso /dev/sdb --target-filesystem NTFS
   ```
5. Monitored the process via **SSH** from Mac:
   ```bash
   ssh krishna@192.168.0.31
   sudo ps aux | grep woeusb
   sudo iotop -o
   ```
   - Confirmed active `dd` writing `install.wim` (~5 GB).  
   - Observed it hanging on:
     ```
     Installing for i386-pc platform...
     ```
6. Aborted gracefully with `Ctrl + C` once confirmed frozen, then cleaned up:
   ```bash
   sudo umount /dev/sdb* 2>/dev/null
   sudo umount /tmp/woeusb* 2>/dev/null
   ```
7. Re-ran without BIOS bootloader (UEFI-only):
   ```bash
   sudo woeusb --device ~/Downloads/Win11_25H2_EnglishInternational_x64.iso /dev/sdb --target-filesystem NTFS --no-grub-pc
   ```
8. Waited for the message:
   ```
   Installation done!
   You may now safely detach the target device.
   ```

---

## 💽 **Phase 3 – Finalizing the Installer**

**Goal:** Add `autounattend.xml` to automate and debloat the install.

1. After USB remounted as `/media/$USER/WoeUSB/`, copied the XML:
   ```bash
   cp ~/Downloads/autounattend.xml /media/$USER/WoeUSB/
   ```
2. Verified placement:
   ```bash
   ls /media/$USER/WoeUSB | grep autounattend
   ```
3. Synced and powered off the USB:
   ```bash
   sync
   udisksctl power-off -b /dev/sdb
   ```

---

## 💻 **Phase 4 – Installing Windows 11**

**Goal:** Clean, automated Windows installation on HP laptop.

1. Booted HP laptop → selected **UEFI: USB**.  
2. Windows Setup auto-ran using the custom `autounattend.xml`.  
3. Completed install with:
   - **Windows Defender active** (not disabled)  
   - **Bloatware removed** (no Store junk, no Cortana, no Copilot)  
   - **Offline setup bypassed**  
   - **Local admin user created automatically**

4. Verified successful boot and clean system state.

---

## 🧠 **Phase 5 – Post-install Validation**

**Goal:** Ensure activation, performance, and protection all good.

1. Checked Windows version:
   ```bash
   winver
   ```
   → *Windows 11 Pro – 25H2*.  
2. Confirmed **Defender** running and up-to-date.  
3. Verified **digital license activation** (auto-activated using old Windows 10 entitlement).  
4. Ran Windows Update once for latest drivers and Defender definitions.  
5. Created restore point for clean baseline:
   ```powershell
   Enable-ComputerRestore -Drive "C:\"
   Checkpoint-Computer -Description "Clean Base"
   ```
6. Verified Start menu clean, fast, and free of bloat.

---

## 🔥 **Outcome**

| Component | Result |
|------------|---------|
| OS | Windows 11 Pro (Debloated + Defender active) |
| Boot Mode | UEFI |
| Activation | Auto via Digital License (linked to old Win10 key) |
| USB Creation Tool | WoeUSB (NTFS, `--no-grub-pc`) |
| XML Method | Custom unattended config |
| Control Method | Remote SSH from MacBook |
| Time Spent | ~2.5 hours total |
| Result | ✅ Fully automated, clean, and fast Windows 11 setup |

---

## 💬 **Summary**

You:
- Flashed a Windows 11 ISO from macOS  
- SSH’d into your HP laptop running Pop!_OS  
- Built a writable Windows installer using WoeUSB  
- Skipped the broken BIOS bootloader step  
- Injected `autounattend.xml` for an unattended, debloated install  
- Installed and activated Windows 11 successfully  
- Confirmed Defender and updates running normally  

> **Result:** From Pop!_OS to a clean, self-activating Windows 11 — remotely built, fully automated, and perfectly executed 💪  


---

## ⚠️ **Problems Faced & Lessons Learned**

### 🧱 1️⃣ Partition Table Confusion on macOS
- Initially, the USB didn’t show up in Finder — only the **EFI** partition appeared.  
- Attempting to erase it gave errors like “Could not unmount disk”.  
- Fixed by using `diskutil eraseDisk FAT32 CLEAN MBRFormat /dev/disk7` to fully reinitialize the stick.

### 🧩 2️⃣ `dd` Path Issues and File Not Found
- Encountered “No such file or directory” due to incorrect path expansion (`~/Downloads/...`).  
- Solved by running commands **inside the correct directory** or using **absolute paths** like `/Users/krishna/Downloads/...`.

### 💾 3️⃣ Read-only USB After Flashing ISO
- `dd` created an ISO9660 read-only filesystem, making it impossible to copy `autounattend.xml`.  
- Fixed by switching to **WoeUSB**, which extracts files instead of cloning the ISO, keeping the USB writable.

### 🧠 4️⃣ WoeUSB Hanging at “Installing for i386-pc Platform”
- WoeUSB stalled indefinitely at GRUB installation for BIOS boot.  
- Diagnosed the issue via SSH using:
  ```bash
  ps aux | grep woeusb
  iotop -o
  ```
- Confirmed the hang was from legacy GRUB setup on NTFS.  
- Solved by rerunning with the flag:
  ```bash
  --no-grub-pc
  ```
  → skipped BIOS bootloader, produced a **UEFI-only**, fully bootable USB.

### 💡 5️⃣ USB Not Showing in `diskutil list`
- On macOS, the USB vanished after replugging via Type-C hub.  
- Diagnosed with:
  ```bash
  system_profiler SPUSBDataType
  ```
- Reconnected directly via a Type-C → USB-A adapter → fixed detection.

### 🧰 6️⃣ Long Copy Times (appearing stuck at 11%)
- During WoeUSB run, it stayed at “11 %” for 20+ minutes.  
- Identified as normal due to copying large `install.wim` (~5 GB).  
- Verified activity using:
  ```bash
  sudo iotop -o
  ```

### 🔐 7️⃣ SSH into Pop!_OS During Build
- Managed the entire process remotely from the MacBook using SSH:
  ```bash
  ssh krishna@192.168.0.31
  ```
- This allowed live monitoring, recovery, and control from another device — proving the setup was resilient even across OS boundaries.

### ✅ **Key Takeaways**
- Always flash Windows ISOs with **WoeUSB or Ventoy** instead of `dd` for editability.  
- For modern systems, **UEFI-only boot** is faster, cleaner, and avoids GRUB issues.  
- **`--no-grub-pc`** flag is essential for skipping BIOS bootloader hangs.  
- Keep one spare small USB just for `autounattend.xml` if needed.  
- Always verify disk activity before assuming a process is frozen.  
- Remote SSH management is a lifesaver when handling long build tasks.

> **Summary:** Every problem hit today — from USB detection to installer hangs — ended up as a learning step toward a cleaner, reproducible workflow 🔥  
